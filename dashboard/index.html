<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dashboard Manager</title>
    <link rel="icon" href="https://ghazabegins.cyou/tj/logo.PNG" type="image/png">
    
    <script>
        if(localStorage.getItem('isLoggedIn') !== 'true') window.location.href = 'login.html';
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #f0f2f5; --text-color: #333; --card-bg: #fff; --accent: #11998e;
            --subtitle: #666; --highlight-bg: #e0f2f1; --highlight-border: #11998e; --logo-filter: invert(1);
        }
        [data-theme="dark"] {
            --bg-color: #121212; --text-color: #e0e0e0; --card-bg: #1e1e1e; --accent: #38ef7d;
            --subtitle: #aaa; --highlight-bg: #1a2e2a; --highlight-border: #38ef7d; --logo-filter: none;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; transition: background 0.3s, color 0.3s; }
        body {
            font-family: 'Poppins', sans-serif; background-color: var(--bg-color); color: var(--text-color);
            min-height: 100vh; padding: 20px; display: flex; flex-direction: column; align-items: center;
        }

        /* TOP BAR RESPONSIVE */
        .top-bar {
            width: 100%; max-width: 800px; display: flex; justify-content: flex-end; align-items: center;
            gap: 10px; margin-bottom: 20px;
        }
        .btn-logout {
            padding: 5px 12px; background: transparent; border: 1px solid var(--text-color);
            color: var(--text-color); border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 0.8rem;
        }
        .theme-switch { display: inline-block; height: 28px; position: relative; width: 50px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; border-radius: 34px; }
        .slider:before { background-color: white; bottom: 4px; content: ""; height: 20px; left: 4px; position: absolute; transition: .4s; width: 20px; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(22px); }

        .dashboard-container { text-align: center; width: 100%; max-width: 600px; margin-top: 10px; }

        .logo-img {
            max-width: 140px; width: 40%; height: auto; margin: 0 auto 15px;
            filter: var(--logo-filter); display: block;
        }
        
        h1 { font-size: 1.5rem; font-weight: 700; margin-bottom: 5px; }
        p.subtitle { color: var(--subtitle); margin-bottom: 30px; font-size: 0.9rem; }

        /* WIDGET HARI INI */
        .today-widget {
            background: var(--highlight-bg); border: 2px solid var(--highlight-border);
            border-radius: 16px; padding: 20px; margin-bottom: 30px; text-align: left;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .widget-header { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--highlight-border); font-weight: 700; color: var(--accent); }
        .live-dot { height: 8px; width: 8px; background: red; border-radius: 50%; display: inline-block; animation: blink 1.5s infinite; margin-right: 5px;}
        
        .today-match-item {
            background: var(--card-bg); padding: 12px; border-radius: 8px; margin-bottom: 8px;
            display: flex; justify-content: space-between; align-items: center;
            border-left: 4px solid var(--accent);
        }
        .match-time { font-weight: 700; font-size: 1rem; }
        .match-info { text-align: right; font-size: 0.9rem; }

        /* MENU GRID (MOBILE FRIENDLY) */
        .menu-grid { display: grid; grid-template-columns: 1fr; gap: 15px; } /* Default 1 kolom (HP) */
        @media (min-width: 600px) { .menu-grid { grid-template-columns: 1fr 1fr; } } /* 2 Kolom di Desktop */

        .menu-card {
            background-color: var(--card-bg); padding: 20px; border-radius: 16px; text-decoration: none; color: var(--text-color);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 15px; border: 2px solid transparent; text-align: left;
        }
        .menu-card:hover { transform: translateY(-3px); border-color: var(--accent); }
        .card-icon { font-size: 2rem; }
        .card-text h3 { font-size: 1.1rem; margin-bottom: 2px; }
        .card-text p { font-size: 0.8rem; opacity: 0.7; }

        .footer { margin-top: 40px; font-size: 0.75rem; color: var(--subtitle); opacity: 0.6; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
    </style>
</head>
<body>

    <div class="top-bar">
        <button onclick="logout()" class="btn-logout">üîí Logout</button>
        <span style="font-size:0.8rem">Mode</span>
        <label class="theme-switch">
            <input type="checkbox" id="checkbox" />
            <div class="slider round"></div>
        </label>
    </div>

    <div class="dashboard-container">
        <img src="https://ghazabegins.cyou/tj/logo.PNG" alt="Logo" class="logo-img">
        <h1>Dashboard Manager</h1>
        <p class="subtitle">Halo, Semangat bekerja!</p>

        <div class="today-widget">
            <div class="widget-header">
                <span><span class="live-dot"></span>Hari Ini</span>
                <span id="currentDateDisplay" style="font-size:0.8rem; opacity:0.8">-</span>
            </div>
            <div id="today-schedule-list">
                <div style="text-align:center; padding:10px; font-size:0.9rem;">‚è≥ Cek jadwal...</div>
            </div>
        </div>

        <div class="menu-grid">
            <a href="jadwal_bola.html" class="menu-card">
                <span class="card-icon">üìù</span>
                <div class="card-text">
                    <h3>Input Baru</h3>
                    <p>Tambah data pertandingan</p>
                </div>
            </a>
            <a href="kelola_jadwal.html" class="menu-card">
                <span class="card-icon">üìä</span>
                <div class="card-text">
                    <h3>Laporan Jadwal</h3>
                    <p>Cek Jadwal & Status selesai</p>
                </div>
            </a>
        </div>

        <div class="footer">&copy; 2025 Tiangjauh Photography</div>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwJGLSActDA3XA3SGZscC04W85P1TTeXEvBDXoGTd_uxCOM_ENNCIk_jD9MJIMl9B979g/exec'; // GANTI URL DISINI

        // LOGOUT
        function logout() {
            if(confirm('Keluar akun?')) { localStorage.removeItem('isLoggedIn'); window.location.href = 'login.html'; }
        }

        // DARK MODE
        const toggleSwitch = document.querySelector('.theme-switch input');
        const theme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', theme);
        if(theme === 'dark') toggleSwitch.checked = true;
        
        toggleSwitch.addEventListener('change', e => {
            const newTheme = e.target.checked ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });

        // WIDGET
        document.getElementById('currentDateDisplay').innerText = new Date().toLocaleDateString('id-ID', {weekday:'long', day:'numeric', month:'short'});
        const listDiv = document.getElementById('today-schedule-list');
        
        fetch(scriptURL).then(r => r.json()).then(data => {
            const today = new Date(); today.setHours(0,0,0,0);
            const matches = data.filter(i => {
                if(!i.Tanggal) return false;
                const d = new Date(i.Tanggal); d.setHours(0,0,0,0);
                return d.getTime() === today.getTime();
            }).sort((a,b) => a.Waktu.localeCompare(b.Waktu));

            listDiv.innerHTML = '';
            if(matches.length === 0) {
                listDiv.innerHTML = '<div style="text-align:center; opacity:0.7">üò¥ Tidak ada jadwal hari ini</div>';
                return;
            }
            matches.forEach(m => {
                const color = m.Status === 'Selesai' ? 'color:#2ecc71' : '';
                listDiv.innerHTML += `
                    <div class="today-match-item">
                        <div class="match-time">${m.Waktu}</div>
                        <div class="match-info">
                            <div style="font-weight:600; ${color}">${m.Tim}</div>
                            <div style="font-size:0.8rem; opacity:0.7">${m.Venue}</div>
                        </div>
                    </div>`;
            });
        }).catch(() => listDiv.innerHTML = '<div style="text-align:center; color:red">Gagal memuat</div>');
    </script>
</body>
</html>
